{% load static %}
{% include "header.html" %}
    <body>
      <div class="container">
      {% include "navbar.html" %}

    <h1>Kapitel: {{kapitelliste.name}}</h1>
    
  <h3>Auflistung Szenen</h3>

    <ul class="list-group">
      {% for szene in szenen %}
      <li class="list-group-item"><b>Name:</b> {{szene.name}}</li>
      <li class="list-group-item"><b>Kapitel:</b> {{szene.kapitel}}</li>
      <li class="list-group-item"><b>Chronologie:</b> {{szene.chronologie}}</li>
      <li class="list-group-item"><b>Ort:</b> {{szene.ort}}</li>
      <li class="list-group-item"><b>Handlung:</b> {{szene.beschreibung}}</li>
      <li class="list-group-item"><b>Kommentar:</b> {{szene.kommentar}}</li>
      <li class="list-group-item"><a class="btn btn-primary" href="{% url 'szene_edit' szene.id%}" role="button">Editieren</a></li>
            <li class="list-group-item"><form method="POST" action="{% url 'delete_szene' %}">
            {% csrf_token %}
            <input type="text" name="parameter1" style="display:none;" value="{{szene.id}}">
            <input type="text" name="parameter2" style="display:none;" value="{{kapitelliste.id}}">
            <button class="btn btn-danger" type="submit">Delete</button>
        </form></li>
      <br>
      {% endfor %}
      </ul> 
      <br> 
  
      <form action="{% url 'szenen' kapitelliste.id %}" method="post"> 
        {% csrf_token %} 

        <div class="md-form mb-4 pink-textarea active-pink-textarea-2">
          <i class="fas fa-angle-double-right prefix"></i>
          
        <textarea name="kapitel_kommentar" id="kapitel_kommentar"  class="md-textarea form-control" rows="10">{{kapitelliste.kommentar}}</textarea>
        <label for="form23">Notizen bearbeiten</label>
      </div>
      
      <a class="btn btn-primary" href="{% url 'kapitel' %}" role="button">Zurück</a>
        <input type="submit" value="Speichern" type="button" class="btn btn-success">
        
      </form><br>

      <h3>Neue Szene anlegen</h3>

      <form action="{% url 'szene_anlegen' %}" method="post"> 
        {% csrf_token %} 
      
        <div class="input-group mb-3">
          <p><span class="input-group-text" id="basic-addon1">Szenenname</span>
        <input type="text" class="form-control" name="szene_name" value="" aria-label="Username" aria-describedby="basic-addon1"></p> <!-- greift auf die Post-Variable zu -->
        <p><span class="input-group-text" id="basic-addon1">Chronologie</span>
          <input type="text" class="form-control" name="chronologie" value="" aria-label="Username" aria-describedby="basic-addon1"></p>
          <p><span class="input-group-text" id="basic-addon1">Ort</span><select name="ort_name" class="form-select" aria-label="Default select example">
            {% for liste in orte %} <!--alle aktuell vorhandenen Listen auslesen-->
      <option value="{{liste.id}}">{{liste.name}}</option>
      {% endfor %}
          </select>
              <input type="text" class="form-control" name="kapitelnr" style="display:none;" value="{{kapitelliste.id}}" aria-label="Username" aria-describedby="basic-addon1"></p> <!-- versteckt übermittelter value um Szene dem richtigen Kapitel zuzuordnen -->
        </div>

      <input type="submit" value="Erstellen" type="button" class="btn btn-success">
      </form>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    
</body>